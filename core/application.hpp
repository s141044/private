
#pragma once

#ifndef NN_RENDER_CORE_APPLICATION_HPP
#define NN_RENDER_CORE_APPLICATION_HPP

#include"shader.hpp"

///////////////////////////////////////////////////////////////////////////////////////////////////

namespace nn{

///////////////////////////////////////////////////////////////////////////////////////////////////

namespace render{

///////////////////////////////////////////////////////////////////////////////////////////////////
//前方宣言
///////////////////////////////////////////////////////////////////////////////////////////////////

namespace iface{ class gui_manager; }
namespace iface{ class device_input; }
namespace iface{ class render_device; }

///////////////////////////////////////////////////////////////////////////////////////////////////
//大域変数
///////////////////////////////////////////////////////////////////////////////////////////////////

inline unique_ptr<iface::gui_manager>	gp_gui_manager;
inline unique_ptr<iface::device_input>	gp_device_input;
inline unique_ptr<iface::render_device>	gp_render_device;
inline unique_ptr<shader_manager>		gp_shader_manager;

///////////////////////////////////////////////////////////////////////////////////////////////////
//application_base
///////////////////////////////////////////////////////////////////////////////////////////////////

namespace iface{ class application_base
{
protected:

	//デストラクタ
	virtual ~application_base(){}

	//初期化
	virtual void base_initialize(const uint2 present_size) = 0;
	
	//終了処理
	virtual void base_finalize() = 0;

	//メインループ
	virtual int main_loop() = 0;

protected:
	
	//更新
	virtual int base_update() = 0;

	//リサイズ
	virtual void base_resize(const uint2 present_size) = 0;

	//フルスクリーンの切り替え
	virtual void toggle_fullscreen(const bool fullscreen) = 0;
};}

///////////////////////////////////////////////////////////////////////////////////////////////////

} //namespace render

///////////////////////////////////////////////////////////////////////////////////////////////////

} //namespace nn

///////////////////////////////////////////////////////////////////////////////////////////////////

#endif
