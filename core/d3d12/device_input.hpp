
#pragma once

#ifndef NN_RENDER_CORE_D3D12_DEVICE_INPUT_HPP
#define NN_RENDER_CORE_D3D12_DEVICE_INPUT_HPP

#include"../device_input.hpp"

#define DIRECTINPUT_VERSION 0x0800
#include<dinput.h>
#include<wrl.h>

///////////////////////////////////////////////////////////////////////////////////////////////////

namespace nn{

///////////////////////////////////////////////////////////////////////////////////////////////////

namespace render{

///////////////////////////////////////////////////////////////////////////////////////////////////

namespace d3d12{

///////////////////////////////////////////////////////////////////////////////////////////////////
//前方宣言
///////////////////////////////////////////////////////////////////////////////////////////////////

using Microsoft::WRL::ComPtr;

///////////////////////////////////////////////////////////////////////////////////////////////////
//device_input
///////////////////////////////////////////////////////////////////////////////////////////////////

class device_input : public iface::device_input
{
public:

	//コンストラクタ
	device_input(const HWND hwnd);

	//初期化
	void initialize() override;
	
	//終了処理
	void finalize() override;

	//更新
	void update(const float dt) override;

private:

	HWND							m_hwnd;
	ComPtr<IDirectInput8A>			mp_direct_input;
	ComPtr<IDirectInputDevice8A>	mp_mouse;
	ComPtr<IDirectInputDevice8A>	mp_keyboard;
	unsigned char					m_key_state[256];
	size_t							m_button_mapping[num_inputs];
};

///////////////////////////////////////////////////////////////////////////////////////////////////

} //namespace d3d12

///////////////////////////////////////////////////////////////////////////////////////////////////

} //namespace render

///////////////////////////////////////////////////////////////////////////////////////////////////

} //namespace nn

///////////////////////////////////////////////////////////////////////////////////////////////////

#include"device_input/device_input-impl.hpp"

///////////////////////////////////////////////////////////////////////////////////////////////////

#endif
