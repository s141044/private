
#pragma once

#ifndef NN_RENDER_CORE_D3D12_APPLICATION_HPP
#define NN_RENDER_CORE_D3D12_APPLICATION_HPP

#include"gui.hpp"
#include"core.hpp"
#include"device_input.hpp"
#include"../application.hpp"

///////////////////////////////////////////////////////////////////////////////////////////////////

namespace nn{

///////////////////////////////////////////////////////////////////////////////////////////////////

namespace render{

///////////////////////////////////////////////////////////////////////////////////////////////////

namespace d3d12{

///////////////////////////////////////////////////////////////////////////////////////////////////
//application_base
///////////////////////////////////////////////////////////////////////////////////////////////////

class application_base : public iface::application_base
{
public:

	//コンストラクタ
	application_base(const wchar_t* window_name, const HINSTANCE hinstance, const int ncmdshow);

	//初期化
	void base_initialize(const uint2 present_size) override final;
	
	//終了処理
	void base_finalize() override final;

	//メインループ
	int main_loop() override final;

private:

	//ウィンドウプロシージャ
	static LRESULT wnd_proc(HWND hwnd, UINT message, WPARAM wp, LPARAM lp);

private:

	const wchar_t*							m_window_name;
	uint2									m_window_size[2] = {};
	HINSTANCE								m_hinstance;
	HWND									m_hwnd;
	int										m_ncmdshow;
	static constexpr uint					m_window_style = WS_OVERLAPPEDWINDOW;

	RECT									m_window_rect;
	bool									m_fullscreen = false;
};

///////////////////////////////////////////////////////////////////////////////////////////////////

} //namespace d3d12

///////////////////////////////////////////////////////////////////////////////////////////////////

} //namespace render

///////////////////////////////////////////////////////////////////////////////////////////////////

} //namespace nn

///////////////////////////////////////////////////////////////////////////////////////////////////

#include"application/application_base-impl.hpp"

///////////////////////////////////////////////////////////////////////////////////////////////////

#endif
